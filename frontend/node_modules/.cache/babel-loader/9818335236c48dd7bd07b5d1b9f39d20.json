{"ast":null,"code":"import { toResult } from './util';\nexport var outside = function outside(portPosition, elemBBox, args) {\n  return outsideLayout(portPosition, elemBBox, false, args);\n};\nexport var outsideOriented = function outsideOriented(portPosition, elemBBox, args) {\n  return outsideLayout(portPosition, elemBBox, true, args);\n};\nexport var inside = function inside(portPosition, elemBBox, args) {\n  return insideLayout(portPosition, elemBBox, false, args);\n};\nexport var insideOriented = function insideOriented(portPosition, elemBBox, args) {\n  return insideLayout(portPosition, elemBBox, true, args);\n};\n\nfunction outsideLayout(portPosition, elemBBox, autoOrient, args) {\n  var offset = args.offset != null ? args.offset : 15;\n  var angle = elemBBox.getCenter().theta(portPosition);\n  var bboxAngles = getBBoxAngles(elemBBox);\n  var y;\n  var tx;\n  var ty;\n  var textAnchor;\n  var orientAngle = 0;\n\n  if (angle < bboxAngles[1] || angle > bboxAngles[2]) {\n    y = '.3em';\n    tx = offset;\n    ty = 0;\n    textAnchor = 'start';\n  } else if (angle < bboxAngles[0]) {\n    y = '0';\n    tx = 0;\n    ty = -offset;\n\n    if (autoOrient) {\n      orientAngle = -90;\n      textAnchor = 'start';\n    } else {\n      textAnchor = 'middle';\n    }\n  } else if (angle < bboxAngles[3]) {\n    y = '.3em';\n    tx = -offset;\n    ty = 0;\n    textAnchor = 'end';\n  } else {\n    y = '.6em';\n    tx = 0;\n    ty = offset;\n\n    if (autoOrient) {\n      orientAngle = 90;\n      textAnchor = 'start';\n    } else {\n      textAnchor = 'middle';\n    }\n  }\n\n  return toResult({\n    position: {\n      x: Math.round(tx),\n      y: Math.round(ty)\n    },\n    angle: orientAngle,\n    attrs: {\n      '.': {\n        y: y,\n        'text-anchor': textAnchor\n      }\n    }\n  }, args);\n}\n\nfunction insideLayout(portPosition, elemBBox, autoOrient, args) {\n  var offset = args.offset != null ? args.offset : 15;\n  var angle = elemBBox.getCenter().theta(portPosition);\n  var bboxAngles = getBBoxAngles(elemBBox);\n  var y;\n  var tx;\n  var ty;\n  var textAnchor;\n  var orientAngle = 0;\n\n  if (angle < bboxAngles[1] || angle > bboxAngles[2]) {\n    y = '.3em';\n    tx = -offset;\n    ty = 0;\n    textAnchor = 'end';\n  } else if (angle < bboxAngles[0]) {\n    y = '.6em';\n    tx = 0;\n    ty = offset;\n\n    if (autoOrient) {\n      orientAngle = 90;\n      textAnchor = 'start';\n    } else {\n      textAnchor = 'middle';\n    }\n  } else if (angle < bboxAngles[3]) {\n    y = '.3em';\n    tx = offset;\n    ty = 0;\n    textAnchor = 'start';\n  } else {\n    y = '0em';\n    tx = 0;\n    ty = -offset;\n\n    if (autoOrient) {\n      orientAngle = -90;\n      textAnchor = 'start';\n    } else {\n      textAnchor = 'middle';\n    }\n  }\n\n  return toResult({\n    position: {\n      x: Math.round(tx),\n      y: Math.round(ty)\n    },\n    angle: orientAngle,\n    attrs: {\n      '.': {\n        y: y,\n        'text-anchor': textAnchor\n      }\n    }\n  }, args);\n}\n\nfunction getBBoxAngles(elemBBox) {\n  var center = elemBBox.getCenter();\n  var tl = center.theta(elemBBox.getTopLeft());\n  var bl = center.theta(elemBBox.getBottomLeft());\n  var br = center.theta(elemBBox.getBottomRight());\n  var tr = center.theta(elemBBox.getTopRight());\n  return [tl, tr, br, bl];\n}","map":null,"metadata":{},"sourceType":"module"}