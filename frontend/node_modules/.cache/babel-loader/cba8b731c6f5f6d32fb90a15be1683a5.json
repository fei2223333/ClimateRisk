{"ast":null,"code":"import SingularValueDecomposition from './dc/svd';\nimport Matrix from './matrix';\n\nfunction xrange(n, exception) {\n  var range = [];\n\n  for (var i = 0; i < n; i++) {\n    if (i !== exception) {\n      range.push(i);\n    }\n  }\n\n  return range;\n}\n\nfunction dependenciesOneRow(error, matrix, index) {\n  var thresholdValue = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 10e-10;\n  var thresholdError = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 10e-10;\n\n  if (error > thresholdError) {\n    return new Array(matrix.rows + 1).fill(0);\n  } else {\n    var returnArray = matrix.addRow(index, [0]);\n\n    for (var i = 0; i < returnArray.rows; i++) {\n      if (Math.abs(returnArray.get(i, 0)) < thresholdValue) {\n        returnArray.set(i, 0, 0);\n      }\n    }\n\n    return returnArray.to1DArray();\n  }\n}\n\nexport function linearDependencies(matrix) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$thresholdVal = options.thresholdValue,\n      thresholdValue = _options$thresholdVal === void 0 ? 10e-10 : _options$thresholdVal,\n      _options$thresholdErr = options.thresholdError,\n      thresholdError = _options$thresholdErr === void 0 ? 10e-10 : _options$thresholdErr;\n  matrix = Matrix.checkMatrix(matrix);\n  var n = matrix.rows;\n  var results = new Matrix(n, n);\n\n  for (var i = 0; i < n; i++) {\n    var b = Matrix.columnVector(matrix.getRow(i));\n    var Abis = matrix.subMatrixRow(xrange(n, i)).transpose();\n    var svd = new SingularValueDecomposition(Abis);\n    var x = svd.solve(b);\n    var error = Matrix.sub(b, Abis.mmul(x)).abs().max();\n    results.setRow(i, dependenciesOneRow(error, x, i, thresholdValue, thresholdError));\n  }\n\n  return results;\n}","map":null,"metadata":{},"sourceType":"module"}