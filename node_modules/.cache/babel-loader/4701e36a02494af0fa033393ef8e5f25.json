{"ast":null,"code":"import { debounce } from './util';\nexport function createSensor(element) {\n  var sensor = null;\n  var listeners = [];\n  var trigger = debounce(function () {\n    listeners.forEach(function (listener) {\n      listener(element);\n    });\n  });\n\n  var create = function create() {\n    var s = new ResizeObserver(trigger);\n    s.observe(element);\n    trigger();\n    return s;\n  };\n\n  var bind = function bind(listener) {\n    if (!sensor) {\n      sensor = create();\n    }\n\n    if (listeners.indexOf(listener) === -1) {\n      listeners.push(listener);\n    }\n  };\n\n  var destroy = function destroy() {\n    if (sensor) {\n      sensor.disconnect();\n      listeners = [];\n      sensor = null;\n    }\n  };\n\n  var unbind = function unbind(listener) {\n    var idx = listeners.indexOf(listener);\n\n    if (idx !== -1) {\n      listeners.splice(idx, 1);\n    } // no listener, and sensor is exist then destroy the sensor\n\n\n    if (listeners.length === 0 && sensor) {\n      destroy();\n    }\n  };\n\n  return {\n    element: element,\n    bind: bind,\n    destroy: destroy,\n    unbind: unbind\n  };\n}","map":null,"metadata":{},"sourceType":"module"}