{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { Platform, Dom, FunctionExt, ObjectExt } from '../../util';\nimport { Attr } from '../../registry';\nimport { Base } from '../base';\nexport var TextBlock = Base.define({\n  shape: 'text-block',\n  markup: [{\n    tagName: 'rect',\n    selector: 'body'\n  }, Platform.SUPPORT_FOREIGNOBJECT ? {\n    tagName: 'foreignObject',\n    selector: 'foreignObject',\n    children: [{\n      tagName: 'div',\n      ns: Dom.ns.xhtml,\n      selector: 'label',\n      style: {\n        width: '100%',\n        height: '100%',\n        position: 'static',\n        backgroundColor: 'transparent',\n        textAlign: 'center',\n        margin: 0,\n        padding: '0px 5px',\n        boxSizing: 'border-box',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n      }\n    }]\n  } : {\n    tagName: 'text',\n    selector: 'label',\n    attrs: {\n      textAnchor: 'middle'\n    }\n  }],\n  attrs: {\n    body: Object.assign(Object.assign({}, Base.bodyAttr), {\n      refWidth: '100%',\n      refHeight: '100%'\n    }),\n    foreignObject: {\n      refWidth: '100%',\n      refHeight: '100%'\n    },\n    label: {\n      style: {\n        fontSize: 14\n      }\n    }\n  },\n  propHooks: function propHooks(metadata) {\n    var text = metadata.text,\n        others = __rest(metadata, [\"text\"]);\n\n    if (text) {\n      ObjectExt.setByPath(others, 'attrs/label/text', text);\n    }\n\n    return others;\n  },\n  attrHooks: {\n    text: {\n      set: function set(text, _ref) {\n        var cell = _ref.cell,\n            view = _ref.view,\n            refBBox = _ref.refBBox,\n            elem = _ref.elem,\n            attrs = _ref.attrs;\n\n        if (elem instanceof HTMLElement) {\n          elem.textContent = text;\n        } else {\n          // No foreign object\n          var style = attrs.style || {};\n          var wrapValue = {\n            text: text,\n            width: -5,\n            height: '100%'\n          };\n          var wrapAttrs = Object.assign({\n            textVerticalAnchor: 'middle'\n          }, style);\n          var textWrap = Attr.presets.textWrap;\n          FunctionExt.call(textWrap.set, this, wrapValue, {\n            cell: cell,\n            view: view,\n            elem: elem,\n            refBBox: refBBox,\n            attrs: wrapAttrs\n          });\n          return {\n            fill: style.color || null\n          };\n        }\n      },\n      position: function position(text, _ref2) {\n        var refBBox = _ref2.refBBox,\n            elem = _ref2.elem;\n\n        if (elem instanceof SVGElement) {\n          return refBBox.getCenter();\n        }\n      }\n    }\n  }\n});","map":null,"metadata":{},"sourceType":"module"}