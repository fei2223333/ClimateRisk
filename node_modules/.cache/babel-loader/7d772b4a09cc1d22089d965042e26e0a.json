{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * 按照数据中的结果设置fixorder\n */\n\nvar initDataOrder = function initDataOrder(g, nodeOrder) {\n  var simpleNodes = g.nodes().filter(function (v) {\n    var _a;\n\n    return !((_a = g.children(v)) === null || _a === void 0 ? void 0 : _a.length);\n  });\n  var ranks = simpleNodes.map(function (v) {\n    return g.node(v).rank;\n  });\n  var maxRank = Math.max.apply(Math, ranks);\n  var layers = Array(maxRank + 1).fill([]);\n  nodeOrder === null || nodeOrder === void 0 ? void 0 : nodeOrder.forEach(function (n) {\n    var node = g.node(n); // 只考虑原有节点，dummy节点需要按照后续算法排出\n\n    if (!node || (node === null || node === void 0 ? void 0 : node.dummy)) {\n      return;\n    }\n\n    if (!isNaN(node.rank)) {\n      node.fixorder = layers[node.rank].length; // 设置fixorder为当层的顺序\n\n      layers[node.rank].push(n);\n    }\n  });\n};\n\nexports.default = initDataOrder;","map":null,"metadata":{},"sourceType":"script"}