{"ast":null,"code":"import _classCallCheck from \"/Users/shuge/Documents/project/rekit-project/ServiceWebsite/Spine/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/shuge/Documents/project/rekit-project/ServiceWebsite/Spine/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { Dictionary } from '../common';\nimport { Dom } from '../util';\nexport var Cache = /*#__PURE__*/function () {\n  function Cache(view) {\n    _classCallCheck(this, Cache);\n\n    this.view = view;\n    this.clean();\n  }\n\n  _createClass(Cache, [{\n    key: \"clean\",\n    value: function clean() {\n      if (this.elemCache) {\n        this.elemCache.dispose();\n      }\n\n      this.elemCache = new Dictionary();\n      this.pathCache = {};\n    }\n  }, {\n    key: \"get\",\n    value: function get(elem) {\n      var cache = this.elemCache;\n\n      if (!cache.has(elem)) {\n        this.elemCache.set(elem, {});\n      }\n\n      return this.elemCache.get(elem);\n    }\n  }, {\n    key: \"getData\",\n    value: function getData(elem) {\n      var meta = this.get(elem);\n\n      if (!meta.data) {\n        meta.data = {};\n      }\n\n      return meta.data;\n    }\n  }, {\n    key: \"getMatrix\",\n    value: function getMatrix(elem) {\n      var meta = this.get(elem);\n\n      if (meta.matrix == null) {\n        var target = this.view.rotatableNode || this.view.container;\n        meta.matrix = Dom.getTransformToElement(elem, target);\n      }\n\n      return Dom.createSVGMatrix(meta.matrix);\n    }\n  }, {\n    key: \"getShape\",\n    value: function getShape(elem) {\n      var meta = this.get(elem);\n\n      if (meta.shape == null) {\n        meta.shape = Dom.toGeometryShape(elem);\n      }\n\n      return meta.shape.clone();\n    }\n  }, {\n    key: \"getBoundingRect\",\n    value: function getBoundingRect(elem) {\n      var meta = this.get(elem);\n\n      if (meta.boundingRect == null) {\n        meta.boundingRect = Dom.getBBox(elem);\n      }\n\n      return meta.boundingRect.clone();\n    }\n  }]);\n\n  return Cache;\n}();","map":null,"metadata":{},"sourceType":"module"}