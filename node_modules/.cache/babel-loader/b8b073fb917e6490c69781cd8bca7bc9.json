{"ast":null,"code":"import _objectSpread from \"/Users/shuge/Documents/project/rekit-project/ServiceWebsite/Spine/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport { useEffect, useCallback } from 'react';\nimport { useDispatch, useSelector, shallowEqual } from 'react-redux';\nimport { HOME_UPLOAD_FILE_BEGIN, HOME_UPLOAD_FILE_SUCCESS, HOME_UPLOAD_FILE_FAILURE, HOME_UPLOAD_FILE_DISMISS_ERROR } from './constants';\nimport Axios from 'axios';\nexport function uploadFile(formData, flag) {\n  return function (dispatch) {\n    // optionally you can have getState as the second argument\n    dispatch({\n      type: HOME_UPLOAD_FILE_BEGIN\n    }); // Axios.defaults.baseURL = 'https://jsonplaceholder.typicode.com/';\n    // return Axios({\n    //   method: 'post',\n    //   url: 'posts',\n    //   data: formData,\n    //   headers: { 'Content-Type': 'multipart/form-data' },\n    // })\n    //   .then(({ data }) => {\n    //     console.log(data);\n\n    var data = flag ? {\n      list: [{\n        version: 'A',\n        cluster: 'C-1',\n        api: 'API-1-1',\n        weight: 50,\n        label: 1,\n        score: 0.97\n      }, {\n        version: 'A',\n        cluster: 'C-1',\n        api: 'API-1-1',\n        weight: 50,\n        label: 1,\n        score: 0.96\n      }, {\n        version: 'A',\n        cluster: 'C-1',\n        api: 'API-1-1',\n        weight: 50,\n        label: 1,\n        score: 0.95\n      }, {\n        version: 'A',\n        cluster: 'C-1',\n        api: 'API-1-1',\n        weight: 50,\n        label: 1,\n        score: 0.92\n      }, {\n        version: 'A',\n        cluster: 'C-1',\n        api: 'API-1-1',\n        weight: 50,\n        label: 1,\n        score: 0.98\n      }]\n    } : {\n      parsed_log_file_path: \"\\mnt\\logs\\\\2022-03-23\\\\test.csv\",\n      log_statistics: {\n        log_amount: 10000,\n        template_amount: 20,\n        log_template_mapping: {\n          temp_1: 2000,\n          temp_2: 500,\n          temp_3: 150,\n          temp_4: 800,\n          temp_5: 1200\n        }\n      },\n      log_sample_results: {\n        Item_1: {\n          raw_log: \"receive block 203 from 230.106.70.20\",\n          log_template: \"receive block * from *\",\n          parameters: [\"203\", \"230.106.70.20\"]\n        }\n      }\n    };\n    dispatch({\n      type: HOME_UPLOAD_FILE_SUCCESS,\n      data: data,\n      isConan: flag\n    }); //})\n    // .catch(err => {\n    //   dispatch({\n    //       type: HOME_UPLOAD_FILE_FAILURE,\n    //       data: { error: err },\n    //     });\n    // })\n  };\n}\nexport function dismissUploadFileError() {\n  return {\n    type: HOME_UPLOAD_FILE_DISMISS_ERROR\n  };\n}\nexport function useUploadFile() {\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return {\n      uploadFilePending: state.home.uploadFilePending,\n      uploadFileError: state.home.uploadFileError\n    };\n  }, shallowEqual),\n      uploadFilePending = _useSelector.uploadFilePending,\n      uploadFileError = _useSelector.uploadFileError;\n\n  var boundAction = useCallback(function () {\n    return dispatch(uploadFile.apply(void 0, arguments));\n  }, [dispatch]);\n  var boundDismissError = useCallback(function () {\n    return dispatch(dismissUploadFileError());\n  }, [dispatch]);\n  return {\n    uploadFile: boundAction,\n    uploadFilePending: uploadFilePending,\n    uploadFileError: uploadFileError,\n    dismissUploadFileError: boundDismissError\n  };\n}\n\n__signature__(useUploadFile, \"useDispatch{dispatch}\\nuseSelector{{ uploadFilePending, uploadFileError }}\\nuseCallback{boundAction}\\nuseCallback{boundDismissError}\", function () {\n  return [useDispatch, useSelector];\n});\n\nexport function reducer(state, action) {\n  switch (action.type) {\n    case HOME_UPLOAD_FILE_BEGIN:\n      // Just after a request is sent\n      return _objectSpread({}, state, {\n        uploadFilePending: true,\n        uploadFileError: null,\n        isUploading: true\n      });\n\n    case HOME_UPLOAD_FILE_SUCCESS:\n      // The request is success\n      console.log(action.data);\n      return action.isConan ? _objectSpread({}, state, {\n        uploadFilePending: false,\n        uploadFileError: null,\n        isUploading: false,\n        conanData: action.data\n      }) : _objectSpread({}, state, {\n        uploadFilePending: false,\n        uploadFileError: null,\n        isUploading: false,\n        parsedData: action.data\n      });\n\n    case HOME_UPLOAD_FILE_FAILURE:\n      // The request is failed\n      return _objectSpread({}, state, {\n        uploadFilePending: false,\n        isUploading: false,\n        uploadFileError: action.data.error\n      });\n\n    case HOME_UPLOAD_FILE_DISMISS_ERROR:\n      // Dismiss the request failure error\n      return _objectSpread({}, state, {\n        uploadFileError: null\n      });\n\n    default:\n      return state;\n  }\n}\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(uploadFile, \"uploadFile\", \"/Users/shuge/Documents/project/rekit-project/ServiceWebsite/Spine/src/features/home/redux/uploadFile.js\");\n  reactHotLoader.register(dismissUploadFileError, \"dismissUploadFileError\", \"/Users/shuge/Documents/project/rekit-project/ServiceWebsite/Spine/src/features/home/redux/uploadFile.js\");\n  reactHotLoader.register(useUploadFile, \"useUploadFile\", \"/Users/shuge/Documents/project/rekit-project/ServiceWebsite/Spine/src/features/home/redux/uploadFile.js\");\n  reactHotLoader.register(reducer, \"reducer\", \"/Users/shuge/Documents/project/rekit-project/ServiceWebsite/Spine/src/features/home/redux/uploadFile.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/shuge/Documents/project/rekit-project/ServiceWebsite/Spine/src/features/home/redux/uploadFile.js"],"names":["useEffect","useCallback","useDispatch","useSelector","shallowEqual","HOME_UPLOAD_FILE_BEGIN","HOME_UPLOAD_FILE_SUCCESS","HOME_UPLOAD_FILE_FAILURE","HOME_UPLOAD_FILE_DISMISS_ERROR","Axios","uploadFile","formData","flag","dispatch","type","data","list","version","cluster","api","weight","label","score","parsed_log_file_path","log_statistics","log_amount","template_amount","log_template_mapping","temp_1","temp_2","temp_3","temp_4","temp_5","log_sample_results","Item_1","raw_log","log_template","parameters","isConan","dismissUploadFileError","useUploadFile","state","uploadFilePending","home","uploadFileError","boundAction","boundDismissError","reducer","action","isUploading","console","log","conanData","parsedData","error"],"mappings":"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","sourcesContent":["import { useEffect, useCallback } from 'react';\nimport { useDispatch, useSelector, shallowEqual } from 'react-redux';\nimport {\n  HOME_UPLOAD_FILE_BEGIN,\n  HOME_UPLOAD_FILE_SUCCESS,\n  HOME_UPLOAD_FILE_FAILURE,\n  HOME_UPLOAD_FILE_DISMISS_ERROR,\n} from './constants';\nimport Axios from 'axios';\n\nexport function uploadFile(formData, flag) {\n  return (dispatch) => { // optionally you can have getState as the second argument\n    dispatch({\n      type: HOME_UPLOAD_FILE_BEGIN,\n    });\n\n    // Axios.defaults.baseURL = 'https://jsonplaceholder.typicode.com/';\n    // return Axios({\n    //   method: 'post',\n    //   url: 'posts',\n    //   data: formData,\n    //   headers: { 'Content-Type': 'multipart/form-data' },\n    // })\n    //   .then(({ data }) => {\n    //     console.log(data);\n\n        const data = flag?\n        {\n          list:[\n            {\n              version:'A',\n              cluster:'C-1',\n              api:'API-1-1',\n              weight:50,\n              label:1,\n              score:0.97,\n            },\n            {\n              version:'A',\n              cluster:'C-1',\n              api:'API-1-1',\n              weight:50,\n              label:1,\n              score:0.96,\n            },\n            {\n              version:'A',\n              cluster:'C-1',\n              api:'API-1-1',\n              weight:50,\n              label:1,\n              score:0.95,\n            },\n            {\n              version:'A',\n              cluster:'C-1',\n              api:'API-1-1',\n              weight:50,\n              label:1,\n              score:0.92,\n            },\n            {\n              version:'A',\n              cluster:'C-1',\n              api:'API-1-1',\n              weight:50,\n              label:1,\n              score:0.98,\n            },\n          ]\n        }\n        :{\n          parsed_log_file_path: \"\\mnt\\logs\\\\2022-03-23\\\\test.csv\",\n          log_statistics:{\n            log_amount: 10000,\n            template_amount: 20,\n            log_template_mapping:{\n              temp_1: 2000, \n              temp_2: 500,\n              temp_3: 150, \n              temp_4: 800,\n              temp_5: 1200, \n\n            },\n          },\n          log_sample_results:{\n            Item_1:{\n              raw_log: \"receive block 203 from 230.106.70.20\",\n              log_template: \"receive block * from *\",\n              parameters: [\"203\", \"230.106.70.20\"]\n            }\n          }\n        }\n\n\n        dispatch({\n            type: HOME_UPLOAD_FILE_SUCCESS,\n            data: data,\n            isConan: flag,\n          });\n      //})\n      // .catch(err => {\n      //   dispatch({\n      //       type: HOME_UPLOAD_FILE_FAILURE,\n      //       data: { error: err },\n      //     });\n      // })\n  };\n}\n\nexport function dismissUploadFileError() {\n  return {\n    type: HOME_UPLOAD_FILE_DISMISS_ERROR,\n  };\n}\n\nexport function useUploadFile() {\n  const dispatch = useDispatch();\n\n  const { uploadFilePending, uploadFileError } = useSelector(\n    state => ({\n      uploadFilePending: state.home.uploadFilePending,\n      uploadFileError: state.home.uploadFileError,\n    }),\n    shallowEqual,\n  );\n\n  const boundAction = useCallback((...args) => {\n    return dispatch(uploadFile(...args));\n  }, [dispatch]);\n\n  const boundDismissError = useCallback(() => {\n    return dispatch(dismissUploadFileError());\n  }, [dispatch]);\n\n  return {\n    uploadFile: boundAction,\n    uploadFilePending,\n    uploadFileError,\n    dismissUploadFileError: boundDismissError,\n  };\n}\n\nexport function reducer(state, action) {\n  switch (action.type) {\n    case HOME_UPLOAD_FILE_BEGIN:\n      // Just after a request is sent\n\n      return {\n        ...state,\n        uploadFilePending: true,\n        uploadFileError: null,\n        isUploading: true,\n      };\n\n    case HOME_UPLOAD_FILE_SUCCESS:\n      // The request is success\n      console.log(action.data)\n\n      return action.isConan?\n      {\n        ...state,\n        uploadFilePending: false,\n        uploadFileError: null,\n        isUploading: false,\n        conanData: action.data\n      }\n      :{\n        ...state,\n        uploadFilePending: false,\n        uploadFileError: null,\n        isUploading: false,\n        parsedData: action.data\n      };\n\n    case HOME_UPLOAD_FILE_FAILURE:\n      // The request is failed\n      return {\n        ...state,\n        uploadFilePending: false,\n        isUploading: false,\n        uploadFileError: action.data.error,\n      };\n\n    case HOME_UPLOAD_FILE_DISMISS_ERROR:\n      // Dismiss the request failure error\n      return {\n        ...state,\n        uploadFileError: null,\n      };\n\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}